/*

 * This build file was auto generated by running the Gradle 'init' task

 * by 'jabed' at '11/14/15 7:37 PM' with Gradle 2.8

 *

 * This generated file contains a commented-out sample Java project to get you started.

 * For more details take a look at the Java Quickstart chapter in the Gradle

 * user guide available at https://docs.gradle.org/2.8/userguide/tutorial_java_projects.html

 */

apply plugin: 'java'

apply plugin: 'eclipse'

apply plugin: 'application'

mainClassName = 'hello.HelloWorld'

// tag::repositories[]

repositories {

    mavenCentral()

}

// end::repositories[]

// tag::jar[]

jar {

    baseName = 'jb-hello-world'

    version =  '0.1.0'

}

// end::jar[]

// tag::dependencies[]

sourceCompatibility = 1.8

targetCompatibility = 1.8

dependencies {

    compile "joda-time:joda-time:2.2"

    testCompile "org.junit.jupiter:junit-jupiter-api:5.0.1"

// the following is a work around to fix the warning:

//          warning: unknown enum constant Status.STABLE

    testCompileOnly "org.apiguardian:apiguardian-api:1.0.0"

}

// end::dependencies[]

task dist {

    description "Generate the dist(s) into the dist folder."

}

task distSetup {

    description "Generate the dist folder."

    delete "${projectDir}/dist"

    copy {

        from "${buildDir}/libs"

        into "${projectDir}/dist/main"

    }

    copy {

        from "${projectDir}/build/classes/test/Output"

        into "${projectDir}/dist/test"

    }

}

task zipDist(type: Zip, dependsOn: distSetup) {

    from "${projectDir}/dist/main"

    from "${projectDir}/Readme.md"

    destinationDir = file("${projectDir}/dist")

    version = "${version}"

    appendix = "Main"

    doLast {

        println "Created ${zipDist.archiveName}"

    }

}

task zipTest(type: Zip, dependsOn: distSetup) {

    from "${projectDir}/dist/test"

    from "${projectDir}/Readme.md"

    destinationDir = file("${projectDir}/dist")

    version = "${version}"

    appendix = "Test Output"

    doLast{

        println "Created ${zipTest.archiveName}"

    }

}

distSetup.dependsOn(build)

dist.dependsOn(zipDist)

dist.dependsOn(zipTest)

// tag::wrapper[]

task wrapper(type: Wrapper) {

    gradleVersion = '4.9'

}

// end::wrapper[]
